# OCI Zero To Hero Chapter 5
Ejemplo desarrollado en Spring Boot para mostrar el uso de VPN en OCI. Estos comandos están realizados para distribuciones Oracle Linux, CentOS y Red Hat.

**Script de Base de Datos**

```sql
ALTER SESSION SET CONTAINER="DBPROD_pdb1";
/
DROP USER ZTH CASCADE;
/
CREATE USER ZTH 
    IDENTIFIED BY $3cr3t$
    DEFAULT TABLESPACE users 
    QUOTA 100M ON users 
    TEMPORARY TABLESPACE temp;
/
GRANT UNLIMITED TABLESPACE TO ZTH;
GRANT DBA TO ZTH;
GRANT CREATE SESSION TO ZTH;
ALTER USER ZTH DEFAULT ROLE ALL;
/
CREATE TABLE ZTH.PERSONS (
    ID           NUMBER GENERATED BY DEFAULT AS IDENTITY,
    NAME         VARCHAR2(255) NOT NULL,
    EMAIL        VARCHAR2(255) NOT NULL,
    ROLENAME     VARCHAR2(255),
    PHONE        VARCHAR2(100),
    COUNTRYCODE  VARCHAR2(100) DEFAULT 'CO' NOT NULL,
    PRIMARY KEY(ID)
);
INSERT INTO ZTH.PERSONS (NAME, EMAIL, ROLENAME, PHONE, COUNTRYCODE)
       VALUES ('Jane Doe','jane.doe@oracle.com','Cloud Dev','(+57) 310 123 4560', 'CO');
COMMIT;
```

En el archivo **src/main/resources/application.properties**, se debe modificar la cadena de conexión de acuerdo con la base de datos que se haya desplegado. Importante mantener el nombre del usuario **ZTH** para no tener que realizar cambios en el código.

https://github.com/ociknowledge/ociz2h05/blob/8aaabc2f01814f206a475c10785819657634a05e/src/main/resources/application.properties#L12-L14


```console
sudo dnf install java
sudo firewall-cmd --list-ports
sudo firewall-cmd --zone=public --add-port=8080/tcp --permanent
sudo firewall-cmd --reload
wget https://github.com/ociknowledge/ociz2h05/releases/download/v1.0.0/z2h.jar
```

Los siguientes pasos los debemos ejecutar como root.

```console
sudo -su root
sudo cat <<EOF > /etc/systemd/system/z2h.service
[Unit]
Description=Spring Boot WebApp for From Zero To Hero

[Service]
Type=simple
Restart=on-failure
User=opc
ExecStart=/usr/java/default/bin/java -jar /home/opc/z2h.jar

[Install] 
WantedBy=multi-user.target
EOF
```

Por último, sobre el usuario por defecto realizamos los siguientes comandos.

```console
sudo systemctl daemon-reload
sudo systemctl enable --now z2h
sudo systemctl status z2h
```